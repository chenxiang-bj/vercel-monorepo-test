# Vercel Test Monorepo

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ pnpm workspace ç®¡ç†çš„ monorepo é¡¹ç›®ï¼ŒåŒ…å«ä¸¤ä¸ªå­é¡¹ç›®ï¼š
- `web`: React + Vite + TypeScript é¡¹ç›®
- `website`: Next.js + TypeScript é¡¹ç›®

## ğŸš€ é¡¹ç›®ç»“æ„

```
vercel-test/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml                    # GitHub Actions CI å·¥ä½œæµ
â”œâ”€â”€ web/                              # React é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ test/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vitest.config.ts
â”œâ”€â”€ website/                          # Next.js é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ test/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vitest.config.ts
â”œâ”€â”€ package.json                      # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml               # pnpm workspace é…ç½®
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åŒ…ç®¡ç†å™¨**: pnpm
- **æ„å»ºå·¥å…·**: Vite (React) + Next.js
- **æµ‹è¯•æ¡†æ¶**: Vitest
- **ç±»å‹æ£€æŸ¥**: TypeScript
- **æ ·å¼**: Tailwind CSS
- **CI/CD**: GitHub Actions

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰é¡¹ç›®çš„ä¾èµ–
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# åŒæ—¶å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®çš„å¼€å‘æœåŠ¡å™¨
pnpm dev

# æˆ–è€…å•ç‹¬å¯åŠ¨
pnpm --filter web dev      # å¯åŠ¨ React é¡¹ç›®
pnpm --filter website dev  # å¯åŠ¨ Next.js é¡¹ç›®
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰é¡¹ç›®çš„æµ‹è¯•
pnpm test:run

# æˆ–è€…å•ç‹¬è¿è¡Œ
pnpm test:web               # åªè¿è¡Œ React é¡¹ç›®æµ‹è¯•
pnpm test:website          # åªè¿è¡Œ Next.js é¡¹ç›®æµ‹è¯•

# äº¤äº’å¼æµ‹è¯•æ¨¡å¼
pnpm test
```

### æ„å»ºé¡¹ç›®

```bash
# æ„å»ºæ‰€æœ‰é¡¹ç›®
pnpm build

# æˆ–è€…å•ç‹¬æ„å»º
pnpm --filter web build      # æ„å»º React é¡¹ç›®
pnpm --filter website build  # æ„å»º Next.js é¡¹ç›®
```

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œæ‰€æœ‰é¡¹ç›®çš„ lint
pnpm lint

# æˆ–è€…å•ç‹¬è¿è¡Œ
pnpm --filter web lint      # æ£€æŸ¥ React é¡¹ç›®
pnpm --filter website lint  # æ£€æŸ¥ Next.js é¡¹ç›®
```

## ğŸ”§ å¯ç”¨è„šæœ¬

åœ¨æ ¹ç›®å½•ä¸‹å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

- `pnpm dev` - åŒæ—¶å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®çš„å¼€å‘æœåŠ¡å™¨
- `pnpm build` - æ„å»ºæ‰€æœ‰é¡¹ç›®
- `pnpm test` - è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆäº¤äº’æ¨¡å¼ï¼‰
- `pnpm test:run` - è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆä¸€æ¬¡æ€§ï¼‰
- `pnpm test:web` - åªè¿è¡Œ React é¡¹ç›®æµ‹è¯•
- `pnpm test:website` - åªè¿è¡Œ Next.js é¡¹ç›®æµ‹è¯•
- `pnpm lint` - è¿è¡Œæ‰€æœ‰é¡¹ç›®çš„ä»£ç æ£€æŸ¥
- `pnpm clean` - æ¸…ç†æ„å»ºæ–‡ä»¶

## ğŸš€ GitHub Actions CI/CD

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ GitHub Actions å·¥ä½œæµï¼Œå½“ä»£ç æ¨é€åˆ° `main` åˆ†æ”¯æ—¶ä¼šè‡ªåŠ¨è§¦å‘ï¼š

### å·¥ä½œæµç¨‹

1. **ä»£ç è´¨é‡æ£€æŸ¥ (Lint)**
   - æ£€æŸ¥ä»£ç æ ¼å¼å’Œè¯­æ³•
   - å¹¶è¡Œæ£€æŸ¥ä¸¤ä¸ªé¡¹ç›®

2. **æµ‹è¯• (Test)**
   - åœ¨ Node.js 18.x å’Œ 20.x ä¸Šè¿è¡Œæµ‹è¯•
   - å¹¶è¡Œæµ‹è¯•ä¸¤ä¸ªé¡¹ç›®
   - ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

3. **æ„å»º (Build)**
   - éªŒè¯é¡¹ç›®æ˜¯å¦èƒ½æ­£ç¡®æ„å»º
   - å¹¶è¡Œæ„å»ºä¸¤ä¸ªé¡¹ç›®
   - ä¸Šä¼ æ„å»ºäº§ç‰©

4. **ç»“æœæ±‡æ€» (Summary)**
   - æ£€æŸ¥æ‰€æœ‰æ­¥éª¤çš„ç»“æœ
   - æä¾›æœ€ç»ˆçš„ CI çŠ¶æ€

### è§¦å‘æ¡ä»¶

- æ¨é€åˆ° `main` åˆ†æ”¯
- å‘ `main` åˆ†æ”¯æäº¤ Pull Request

### æµ‹è¯•çŸ©é˜µ

- **Node.js ç‰ˆæœ¬**: 18.x, 20.x
- **é¡¹ç›®**: web, website
- **æ€»å…±**: 4 ä¸ªæµ‹è¯•ä»»åŠ¡å¹¶è¡Œè¿è¡Œ

## ğŸ“Š æµ‹è¯•è¦†ç›–

### Web é¡¹ç›®æµ‹è¯•

- âœ… App ç»„ä»¶æµ‹è¯• (10 ä¸ªæµ‹è¯•)
- âœ… å·¥å…·å‡½æ•°æµ‹è¯• (28 ä¸ªæµ‹è¯•)
- âœ… äº¤äº’æµ‹è¯•å’ŒçŠ¶æ€ç®¡ç†æµ‹è¯•

### Website é¡¹ç›®æµ‹è¯•

- âœ… æ•°å­¦å·¥å…·å‡½æ•°æµ‹è¯• (27 ä¸ªæµ‹è¯•)
- âœ… åŒ…æ‹¬ `1+1=2` éªŒè¯æµ‹è¯•
- âœ… è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†æµ‹è¯•

**æ€»è®¡**: 65 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå…¨éƒ¨é€šè¿‡ âœ…

## ğŸ¯ ç‰¹æ€§

- ğŸ”§ **Monorepo ç®¡ç†**: ä½¿ç”¨ pnpm workspace ç»Ÿä¸€ç®¡ç†ä¾èµ–
- ğŸ§ª **å®Œæ•´æµ‹è¯•**: ä¸¤ä¸ªé¡¹ç›®éƒ½é…ç½®äº† vitest æµ‹è¯•æ¡†æ¶
- ğŸš€ **è‡ªåŠ¨åŒ– CI**: GitHub Actions è‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œæ„å»º
- ğŸ“¦ **å¹¶è¡Œæ„å»º**: æ”¯æŒåŒæ—¶å¼€å‘å’Œæ„å»ºå¤šä¸ªé¡¹ç›®
- ğŸ¨ **ç°ä»£åŒ– UI**: ä¸¤ä¸ªé¡¹ç›®éƒ½é‡‡ç”¨ AI é£æ ¼çš„ç°ä»£ç•Œé¢
- ğŸ“Š **æµ‹è¯•æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç»“æœå’Œæ„å»ºäº§ç‰©

## ğŸ“ å¼€å‘è§„èŒƒ

1. **æäº¤ä»£ç å‰**: ç¡®ä¿è¿è¡Œ `pnpm test:run` å’Œ `pnpm lint`
2. **æ·»åŠ æ–°åŠŸèƒ½**: è¯·ä¸ºæ–°åŠŸèƒ½æ·»åŠ å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
3. **ä¿®æ”¹ä¾èµ–**: åœ¨å¯¹åº”çš„å­é¡¹ç›®ä¸­æ·»åŠ ï¼Œè€Œä¸æ˜¯æ ¹ç›®å½•
4. **ä»£ç æ ¼å¼**: ä½¿ç”¨é¡¹ç›®é…ç½®çš„ ESLint å’Œ Prettier è§„åˆ™

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **pnpm ç‰ˆæœ¬é—®é¢˜**: ç¡®ä¿ä½¿ç”¨ pnpm 8.x ä»¥ä¸Šç‰ˆæœ¬
2. **Node.js ç‰ˆæœ¬**: æ¨èä½¿ç”¨ Node.js 18.x æˆ– 20.x
3. **ä¾èµ–å®‰è£…å¤±è´¥**: å°è¯•æ¸…é™¤ç¼“å­˜ `pnpm store prune`

### æ¸…ç†é¡¹ç›®

```bash
# æ¸…ç†æ‰€æœ‰ node_modules
find . -name "node_modules" -type d -exec rm -rf {} +

# æ¸…ç† pnpm ç¼“å­˜
pnpm store prune

# é‡æ–°å®‰è£…ä¾èµ–
pnpm install
```

## ï¿½ï¿½ è®¸å¯è¯

MIT License 